<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ­ ìˆ˜ë…¸ë´‡ì˜ ë§ˆë²• ìŒì•… ìŠ¤í† ë¦¬í…”ëŸ¬</title>
    <meta name="description" content="ì´ˆë“±í•™ìƒì„ ìœ„í•œ AI ìŒì•… ì°½ì‘ ë„êµ¬ - ë‚˜ë§Œì˜ ìŒì•…ê·¹ ë§Œë“¤ê¸°">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        /* ê·¸ë¼ë°ì´ì…˜ ë°°ê²½ */
        .bg-main {
            background: linear-gradient(135deg, #67e8f9 0%, #a855f7 50%, #ec4899 100%);
            min-height: 100vh;
            position: relative;
        }
        
        .bg-result {
            background: linear-gradient(135deg, #fbbf24 0%, #a855f7 50%, #3b82f6 100%);
            min-height: 100vh;
            position: relative;
        }
        
        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes bounce {
            0%, 100% { transform: translateY(-25%); }
            50% { transform: translateY(0); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .animate-bounce { animation: bounce 1s infinite; }
        .animate-pulse { animation: pulse 2s infinite; }
        .animate-spin { animation: spin 1s linear infinite; }
        
        /* ë°°ê²½ ì¥ì‹ */
        .bg-decoration {
            position: absolute;
            font-size: 4rem;
            pointer-events: none;
            z-index: 1;
        }
        
        .decoration-1 { top: 5%; left: 5%; animation: bounce 1s infinite; }
        .decoration-2 { top: 10%; right: 10%; animation: pulse 2s infinite; }
        .decoration-3 { bottom: 10%; left: 10%; animation: bounce 1s infinite 0.3s; }
        .decoration-4 { bottom: 5%; right: 5%; animation: pulse 2s infinite 0.5s; }
        
        /* ì»¨í…Œì´ë„ˆ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
            position: relative;
            z-index: 10;
        }
        
        /* ì¹´ë“œ */
        .card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            border: 4px solid #fbbf24;
        }
        
        /* í—¤ë” */
        .header {
            background: linear-gradient(135deg, #8b5cf6, #ec4899, #ef4444);
            color: white;
            padding: 2rem;
            position: relative;
        }
        
        .header::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(168, 85, 247, 0.2), rgba(236, 72, 153, 0.2));
        }
        
        .header-content {
            position: relative;
            z-index: 10;
        }
        
        .title {
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: 900;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .subtitle {
            font-size: clamp(0.875rem, 2.5vw, 1.25rem);
            opacity: 0.9;
        }
        
        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            padding: 2rem;
            background: linear-gradient(135deg, #dbeafe, #e0e7ff);
        }
        
        /* ì§„í–‰ ë°” */
        .progress-bar {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 2rem;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .progress-step {
            width: 3.5rem;
            height: 3.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .progress-step.active {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 10px 20px rgba(139, 92, 246, 0.3);
        }
        
        .progress-step.inactive {
            background: #e5e7eb;
            color: #6b7280;
        }
        
        .progress-line {
            width: 4rem;
            height: 0.5rem;
            border-radius: 0.25rem;
            transition: all 0.3s ease;
        }
        
        .progress-line.completed {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
        }
        
        .progress-line.incomplete {
            background: #e5e7eb;
        }
        
        /* ë‹¨ê³„ ì„¤ëª… */
        .step-description {
            text-align: center;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, #fef3c7, #fed7aa);
            border-radius: 1rem;
            border: 4px solid #fbbf24;
        }
        
        .step-title {
            font-size: clamp(1.5rem, 3vw, 2rem);
            font-weight: bold;
            color: #7c2d12;
            margin-bottom: 0.5rem;
        }
        
        .step-desc {
            font-size: clamp(1rem, 2.5vw, 1.25rem);
            color: #92400e;
        }
        
        /* ì„ íƒì§€ ê·¸ë¦¬ë“œ */
        .choices-grid {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .grid-characters {
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }
        
        .grid-settings {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }
        
        .grid-conflicts {
            grid-template-columns: 1fr;
        }
        
        .grid-styles {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }
        
        /* ì„ íƒì§€ ì¹´ë“œ */
        .choice-card {
            padding: 1.5rem;
            border: 3px solid #d1d5db;
            border-radius: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            text-align: center;
        }
        
        .choice-card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border-color: #8b5cf6;
        }
        
        .choice-card.selected {
            border-color: #8b5cf6;
            color: white;
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 25px 50px rgba(139, 92, 246, 0.3);
        }
        
        .choice-emoji {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }
        
        .choice-name {
            font-size: 1.125rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .choice-desc {
            font-size: 0.875rem;
            opacity: 0.8;
            margin-bottom: 0.5rem;
        }
        
        .choice-extra {
            font-size: 0.75rem;
            background: rgba(255, 255, 255, 0.2);
            padding: 0.25rem 0.5rem;
            border-radius: 1rem;
            display: inline-block;
        }
        
        /* ë‚´ë¹„ê²Œì´ì…˜ */
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .nav-button {
            padding: 1rem 2rem;
            border: none;
            border-radius: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .nav-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .nav-button:disabled {
            background: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
        }
        
        .btn-prev {
            background: linear-gradient(135deg, #d1d5db, #9ca3af);
            color: #374151;
        }
        
        .btn-next {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            color: white;
        }
        
        .btn-next:disabled {
            background: #e5e7eb;
            color: #9ca3af;
        }
        
        /* ì§„í–‰ ìƒíƒœ */
        .progress-info {
            text-align: center;
            background: white;
            padding: 1rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 2px solid #8b5cf6;
        }
        
        .progress-text {
            font-weight: bold;
            color: #8b5cf6;
            margin-bottom: 0.5rem;
        }
        
        .progress-stars {
            font-size: 1.5rem;
        }
        
        /* ë„ì›€ë§ */
        .help-text {
            margin-top: 2rem;
            text-align: center;
        }
        
        .help-card {
            background: linear-gradient(135deg, #ecfdf5, #d1fae5);
            padding: 1.5rem;
            border-radius: 1rem;
            border: 4px solid #10b981;
            display: inline-block;
        }
        
        .help-title {
            color: #065f46;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .help-desc {
            color: #047857;
        }
        
        /* ê²°ê³¼ í™”ë©´ */
        .result-container {
            padding: 2rem;
        }
        
        .language-selector {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
        }
        
        .language-buttons {
            background: white;
            border-radius: 0.75rem;
            padding: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 2px solid #8b5cf6;
        }
        
        .language-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            background: transparent;
            color: #8b5cf6;
        }
        
        .language-btn.active {
            background: #8b5cf6;
            color: white;
            box-shadow: 0 2px 4px rgba(139, 92, 246, 0.3);
        }
        
        /* ìŠ¤í† ë¦¬ ìš”ì•½ */
        .story-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .summary-card {
            padding: 1rem;
            border-radius: 0.75rem;
            color: white;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .summary-card:hover {
            transform: translateY(-2px) scale(1.02);
        }
        
        /* ì¥ë©´ ì¹´ë“œ */
        .scene-card {
            margin-bottom: 2rem;
            border: 4px solid transparent;
            border-radius: 1rem;
            padding: 1.5rem;
            color: white;
            transition: all 0.3s ease;
        }
        
        .scene-card:hover {
            transform: translateY(-4px) scale(1.02);
        }
        
        .scene-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .scene-title {
            font-size: clamp(1.125rem, 2.5vw, 1.5rem);
            font-weight: bold;
        }
        
        .scene-meta {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .scene-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: bold;
        }
        
        .scene-description {
            margin-bottom: 1.5rem;
            font-size: clamp(0.875rem, 2vw, 1rem);
            opacity: 0.9;
        }
        
        .prompt-container {
            background: rgba(255, 255, 255, 0.2);
            padding: 1rem;
            border-radius: 0.75rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .prompt-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .prompt-text {
            background: white;
            color: #374151;
            padding: 1rem;
            border-radius: 0.5rem;
            border-left: 4px solid #fbbf24;
            font-family: monospace;
            font-size: 0.875rem;
            line-height: 1.6;
            word-break: break-word;
            margin-bottom: 1rem;
        }
        
        .prompt-actions {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }
        
        .action-button {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.75rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }
        
        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }
        
        .btn-suno {
            background: linear-gradient(135deg, #10b981, #3b82f6);
            color: white;
        }
        
        .btn-copy {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            color: white;
        }
        
        /* ë³µì‚¬ ì•Œë¦¼ */
        .copy-alert {
            position: fixed;
            top: 1rem;
            left: 50%;
            transform: translateX(-50%);
            background: #10b981;
            color: white;
            padding: 1rem 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: bold;
            z-index: 1000;
            animation: bounce 1s infinite;
        }
        
        /* íŒ ì„¹ì…˜ */
        .tips-section {
            margin-top: 2rem;
            background: linear-gradient(135deg, #fef3c7, #fde68a, #e0e7ff);
            padding: 1.5rem;
            border-radius: 1rem;
            border: 4px solid #fbbf24;
        }
        
        .tips-title {
            font-size: clamp(1.125rem, 2.5vw, 1.5rem);
            font-weight: bold;
            color: #92400e;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        .tip-card {
            background: white;
            padding: 1rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .tip-title {
            font-weight: bold;
            margin-bottom: 0.75rem;
            color: #b45309;
        }
        
        .tip-list {
            list-style: none;
            padding: 0;
        }
        
        .tip-list li {
            margin-bottom: 0.5rem;
            color: #374151;
            font-size: 0.875rem;
        }
        
        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .container {
                padding: 0.5rem;
            }
            
            .main-content {
                padding: 1rem;
            }
            
            .header {
                padding: 1rem;
            }
            
            .progress-bar {
                gap: 0.5rem;
            }
            
            .progress-step {
                width: 2.5rem;
                height: 2.5rem;
                font-size: 1rem;
            }
            
            .progress-line {
                width: 2rem;
            }
            
            .navigation {
                justify-content: center;
            }
            
            .nav-button {
                flex: 1;
                justify-content: center;
                min-width: 0;
            }
            
            .scene-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .prompt-actions {
                flex-direction: column;
            }
            
            .action-button {
                justify-content: center;
            }
        }
        
        /* ìˆ¨ê¹€ */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- ë©”ì¸ í™”ë©´ -->
    <div id="mainScreen" class="bg-main">
        <!-- ë°°ê²½ ì¥ì‹ -->
        <div class="bg-decoration decoration-1">ğŸŒŸ</div>
        <div class="bg-decoration decoration-2">ğŸ­</div>
        <div class="bg-decoration decoration-3">ğŸª</div>
        <div class="bg-decoration decoration-4">ğŸµ</div>
        
        <div class="container">
            <div class="card">
                <div class="header">
                    <div class="header-content">
                        <h1 class="title">
                            <span>âœ¨</span>
                            <span>ğŸ­ ìˆ˜ë…¸ë´‡ì˜ ë§ˆë²• ìŒì•… ìŠ¤í† ë¦¬í…”ëŸ¬</span>
                            <span>ğŸ‘‘</span>
                        </h1>
                        <p class="subtitle">âœ¨ ë‚˜ë§Œì˜ íŠ¹ë³„í•œ ìŒì•…ê·¹ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”! ğŸª</p>
                    </div>
                </div>
                
                <div class="main-content">
                    <!-- ì§„í–‰ ë°” -->
                    <div class="progress-bar" id="progressBar">
                        <!-- JavaScriptë¡œ ìƒì„± -->
                    </div>
                    
                    <!-- ë‹¨ê³„ ì„¤ëª… -->
                    <div class="step-description">
                        <h2 class="step-title" id="stepTitle">ì£¼ì¸ê³µ ì„ íƒí•˜ê¸°</h2>
                        <p class="step-desc" id="stepDesc">ì´ì•¼ê¸°ì˜ ì£¼ì¸ê³µì„ ê³¨ë¼ë³´ì„¸ìš”!</p>
                    </div>
                    
                    <!-- ì„ íƒì§€ -->
                    <div class="choices-grid" id="choicesGrid">
                        <!-- JavaScriptë¡œ ìƒì„± -->
                    </div>
                    
                    <!-- ë‚´ë¹„ê²Œì´ì…˜ -->
                    <div class="navigation">
                        <button class="nav-button btn-prev" id="prevButton" onclick="prevStep()">
                            â¬…ï¸ ì´ì „ ë‹¨ê³„
                        </button>
                        
                        <div class="progress-info">
                            <div class="progress-text" id="progressText">1 / 4 ë‹¨ê³„</div>
                            <div class="progress-stars" id="progressStars">ğŸŒŸâ­â­â­</div>
                        </div>
                        
                        <button class="nav-button btn-next" id="nextButton" onclick="nextStep()">
                            ë‹¤ìŒ ë‹¨ê³„ ğŸš€
                        </button>
                    </div>
                    
                    <!-- ë„ì›€ë§ -->
                    <div class="help-text">
                        <div class="help-card">
                            <div class="help-title">ğŸ’¡ ë§ˆë²•ì‚¬ì˜ ì¡°ì–¸:</div>
                            <div class="help-desc">ê° ë‹¨ê³„ì—ì„œ ë§ˆìŒì— ë“œëŠ” ì„ íƒì§€ë¥¼ ê³¨ë¼ì£¼ì„¸ìš”! ëª¨ë“  ì„ íƒì´ ì™„ë£Œë˜ë©´ ì—¬ëŸ¬ë¶„ë§Œì˜ í™˜ìƒì ì¸ ìŒì•…ê·¹ ì‹œë‚˜ë¦¬ì˜¤ê°€ ì™„ì„±ë©ë‹ˆë‹¤! ğŸªâœ¨</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ê²°ê³¼ í™”ë©´ -->
    <div id="resultScreen" class="bg-result hidden">
        <!-- ë³µì‚¬ ì•Œë¦¼ -->
        <div id="copyAlert" class="copy-alert hidden">
            âœ… <span>ë³µì‚¬ ì™„ë£Œ! ğŸ‰</span>
        </div>
        
        <!-- ë°°ê²½ ì¥ì‹ -->
        <div class="bg-decoration decoration-1">â­</div>
        <div class="bg-decoration decoration-2">ğŸŒŸ</div>
        <div class="bg-decoration decoration-3">âœ¨</div>
        <div class="bg-decoration decoration-4">ğŸ’«</div>
        
        <div class="container">
            <div class="card">
                <div class="header">
                    <div class="header-content">
                        <h1 class="title">
                            <span>ğŸ‘‘</span>
                            <span id="storyTitle">ìŒì•…ê·¹ ì œëª©</span>
                            <span>âœ¨</span>
                        </h1>
                        <p class="subtitle" id="storyDuration">âœ¨ ì´ ìƒì˜ì‹œê°„: ì•½ 9ë¶„ 20ì´ˆ âœ¨</p>
                        <button class="nav-button btn-next" onclick="restart()" style="margin-top: 1rem;">
                            ğŸ”„ ìƒˆë¡œìš´ ëª¨í—˜! ğŸª
                        </button>
                    </div>
                </div>
                
                <div class="result-container">
                    <!-- ì–¸ì–´ ì„ íƒ -->
                    <div class="language-selector">
                        <div class="language-buttons">
                            <button class="language-btn active" id="koreanBtn" onclick="setLanguage('korean')">
                                ğŸ‡°ğŸ‡· í•œêµ­ì–´
                            </button>
                            <button class="language-btn" id="englishBtn" onclick="setLanguage('english')">
                                ğŸ‡ºğŸ‡¸ English
                            </button>
                        </div>
                    </div>
                    
                    <!-- ìŠ¤í† ë¦¬ ìš”ì•½ -->
                    <div class="story-summary" id="storySummary">
                        <!-- JavaScriptë¡œ ìƒì„± -->
                    </div>
                    
                    <!-- ì¥ë©´ë“¤ -->
                    <div id="scenesContainer">
                        <!-- JavaScriptë¡œ ìƒì„± -->
                    </div>
                    
                    <!-- íŒ ì„¹ì…˜ -->
                    <div class="tips-section">
                        <h3 class="tips-title">
                            <span>â­</span>
                            ğŸ¬ ë§ˆë²• ê°™ì€ ì—°ì¶œ ì•„ì´ë””ì–´! âœ¨
                        </h3>
                        <div class="tips-grid">
                            <div class="tip-card">
                                <h4 class="tip-title">ğŸ­ í™˜ìƒì ì¸ ê³µì—° íŒ:</h4>
                                <ul class="tip-list">
                                    <li>â€¢ ğŸ¤ ê° ì¥ë©´ë§ˆë‹¤ ë‹¤ë¥¸ ì¹œêµ¬ê°€ ë‚´ë ˆì´í„° ë˜ê¸°</li>
                                    <li>â€¢ ğŸ•º ìŒì•…ì— ë§ì¶° ëª¸ì§“ìœ¼ë¡œ ê°ì • í‘œí˜„í•˜ê¸°</li>
                                    <li>â€¢ ğŸ¨ ìºë¦­í„° ê°€ë©´ì´ë‚˜ ì†Œí’ˆ ë§Œë“¤ê¸°</li>
                                    <li>â€¢ ğŸ“± íƒœë¸”ë¦¿ìœ¼ë¡œ ë°°ê²½ ì´ë¯¸ì§€ ë³´ì—¬ì£¼ê¸°</li>
                                </ul>
                            </div>
                            <div class="tip-card">
                                <h4 class="tip-title">ğŸ“š êµì‹¤ì—ì„œ í™œìš©í•˜ê¸°:</h4>
                                <ul class="tip-list">
                                    <li>â€¢ âœï¸ êµ­ì–´: ìŠ¤í† ë¦¬ ì´ì–´ì“°ê¸° í™œë™</li>
                                    <li>â€¢ ğŸµ ìŒì•…: ë¦¬ë“¬ê³¼ ë©œë¡œë”” ë°°ìš°ê¸°</li>
                                    <li>â€¢ ğŸ¨ ë¯¸ìˆ : ìºë¦­í„°ì™€ ë°°ê²½ ê·¸ë¦¬ê¸°</li>
                                    <li>â€¢ ğŸ’¬ ë„ë•: ë¬¸ì œí•´ê²° ë°©ë²• í† ë¡ í•˜ê¸°</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 2rem;">
                        <div style="background: linear-gradient(135deg, #10b981, #06b6d4); color: white; padding: 1.5rem; border-radius: 1rem; display: inline-block; border: 4px solid white; box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);">
                            <p style="font-weight: bold; font-size: 1.25rem; margin-bottom: 0.5rem;">ğŸµ ì´ì œ ì§„ì§œ ë§ˆë²•ì´ ì‹œì‘ë©ë‹ˆë‹¤! âœ¨</p>
                            <p>ìœ„ì˜ ë§ˆë²• ì£¼ë¬¸ì„ Suno AIì— ì…ë ¥í•˜ë©´ ë†€ë¼ìš´ ìŒì•…ì´ ì™„ì„±ë¼ìš”! ğŸ­</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ë°ì´í„°
        const characters = [
            { id: 'unicorn', name: 'ğŸ¦„ ë°˜ì§ì´ ìœ ë‹ˆì½˜', personality: 'ì‹ ë¹„ë¡­ê³  ìˆœìˆ˜í•œ', voice: 'ë§‘ê³  ê³ ìš´', voiceEn: 'clear and beautiful', personalityEn: 'mysterious and pure', color: 'linear-gradient(135deg, #ec4899, #8b5cf6)' },
            { id: 'dragon', name: 'ğŸ² ìš©ê°í•œ ë“œë˜ê³¤', personality: 'ê°•í•˜ì§€ë§Œ ì¹œì ˆí•œ', voice: 'ì›…ì¥í•˜ê³  ê¹Šì€', voiceEn: 'majestic and deep', personalityEn: 'strong but kind', color: 'linear-gradient(135deg, #ef4444, #f97316)' },
            { id: 'robot', name: 'ğŸ¤– ê·€ì—¬ìš´ ë¡œë´‡', personality: 'ë˜‘ë˜‘í•˜ê³  ì¬ë¯¸ìˆëŠ”', voice: 'ë¯¸ë˜ì ì´ê³  ì‹ ë‚˜ëŠ”', voiceEn: 'futuristic and exciting', personalityEn: 'smart and fun', color: 'linear-gradient(135deg, #3b82f6, #06b6d4)' },
            { id: 'cat', name: 'ğŸ± ë§ˆë²•ì‚¬ ê³ ì–‘ì´', personality: 'ì˜ë¦¬í•˜ê³  ì¥ë‚œê¸° ë§ì€', voice: 'ì‚¬ë‘ìŠ¤ëŸ½ê³  ë§¤ë ¥ì ì¸', voiceEn: 'lovely and charming', personalityEn: 'clever and playful', color: 'linear-gradient(135deg, #fbbf24, #ec4899)' },
            { id: 'fairy', name: 'ğŸ§šâ€â™€ï¸ ìˆ²ì† ìš”ì •', personality: 'ìì—°ì„ ì‚¬ë‘í•˜ëŠ”', voice: 'ì€ì€í•˜ê³  ì‹ ë¹„ë¡œìš´', voiceEn: 'gentle and mystical', personalityEn: 'nature-loving', color: 'linear-gradient(135deg, #10b981, #059669)' },
            { id: 'pirate', name: 'ğŸ´â€â˜ ï¸ ì°©í•œ í•´ì ', personality: 'ëª¨í—˜ì„ ì¢‹ì•„í•˜ëŠ”', voice: 'í™œê¸°ì°¨ê³  ë‹¹ë‹¹í•œ', voiceEn: 'energetic and confident', personalityEn: 'adventure-loving', color: 'linear-gradient(135deg, #f59e0b, #ef4444)' },
            { id: 'hamburger', name: 'ğŸ” ì¶¤ì¶”ëŠ” í–„ë²„ê±°', personality: 'ìœ ì¾Œí•˜ê³  ë§›ìˆëŠ”', voice: 'ë°”ì‚­ë°”ì‚­ ì‹ ë‚˜ëŠ”', voiceEn: 'crispy and exciting', personalityEn: 'cheerful and delicious', color: 'linear-gradient(135deg, #fbbf24, #f97316)' },
            { id: 'penguin', name: 'ğŸ§ ì„ ê¸€ë¼ìŠ¤ í­ê·„', personality: 'ì¿¨í•˜ê³  ë©‹ì§„', voice: 'ì‹œì›í•˜ê³  ì„¸ë ¨ëœ', voiceEn: 'cool and sophisticated', personalityEn: 'cool and stylish', color: 'linear-gradient(135deg, #3b82f6, #6366f1)' },
            { id: 'potato', name: 'ğŸ¥” ë§ˆë²• ê°ì', personality: 'ì—‰ëš±í•˜ê³  ì¬ë¯¸ìˆëŠ”', voice: 'í¬ê·¼í•˜ê³  ë”°ëœ»í•œ', voiceEn: 'cozy and warm', personalityEn: 'quirky and funny', color: 'linear-gradient(135deg, #f59e0b, #fbbf24)' },
            { id: 'superhero_dog', name: 'ğŸ¦¸â€â™‚ï¸ğŸ• ìŠˆí¼ ê°•ì•„ì§€', personality: 'ìš©ê°í•˜ê³  ì¶©ì„±ìŠ¤ëŸ¬ìš´', voice: 'ì˜ì›…ì ì´ê³  í˜ì°¬', voiceEn: 'heroic and powerful', personalityEn: 'brave and loyal', color: 'linear-gradient(135deg, #ef4444, #3b82f6)' },
            { id: 'alien_chef', name: 'ğŸ‘½ğŸ‘¨â€ğŸ³ ìš”ë¦¬í•˜ëŠ” ì™¸ê³„ì¸', personality: 'ì°½ì˜ì ì´ê³  ì‹ ê¸°í•œ', voice: 'ìš°ì£¼ì ì´ê³  ë…íŠ¹í•œ', voiceEn: 'cosmic and unique', personalityEn: 'creative and mysterious', color: 'linear-gradient(135deg, #10b981, #8b5cf6)' },
            { id: 'singing_tree', name: 'ğŸŒ³ğŸµ ë…¸ë˜í•˜ëŠ” ë‚˜ë¬´', personality: 'í‰í™”ë¡­ê³  ì§€í˜œë¡œìš´', voice: 'ìì—°ìŠ¤ëŸ½ê³  ì¡°í™”ë¡œìš´', voiceEn: 'natural and harmonious', personalityEn: 'peaceful and wise', color: 'linear-gradient(135deg, #10b981, #92400e)' }
        ];

        const settings = [
            { id: 'magic_forest', name: 'âœ¨ ë§ˆë²•ì˜ ìˆ²', mood: 'ì‹ ë¹„ë¡­ê³  í‰í™”ë¡œìš´', moodEn: 'mysterious and peaceful', sounds: 'ìƒˆì†Œë¦¬, ë°”ëŒì†Œë¦¬', soundsEn: 'bird songs, wind sounds', color: 'linear-gradient(135deg, #10b981, #059669)', emoji: 'ğŸŒ²ğŸ„âœ¨' },
            { id: 'space', name: 'ğŸš€ ìš°ì£¼ ì •ê±°ì¥', mood: 'ë¯¸ë˜ì ì´ê³  ì›…ì¥í•œ', moodEn: 'futuristic and majestic', sounds: 'ìš°ì£¼ ìŒí–¥, ì‹ ë””ì‚¬ì´ì €', soundsEn: 'space sounds, synthesizer', color: 'linear-gradient(135deg, #6366f1, #8b5cf6)', emoji: 'ğŸŒŒâ­ğŸ›¸' },
            { id: 'underwater', name: 'ğŸŒŠ ë°”ë‹¤ ì† ì™•êµ­', mood: 'ëª½í™˜ì ì´ê³  ì”ì”í•œ', moodEn: 'dreamy and calm', sounds: 'íŒŒë„ì†Œë¦¬, ë¬¼ë°©ìš¸', soundsEn: 'wave sounds, water drops', color: 'linear-gradient(135deg, #06b6d4, #3b82f6)', emoji: 'ğŸ ğŸ°ğŸ’' },
            { id: 'sky_castle', name: 'â˜ï¸ êµ¬ë¦„ ìœ„ ì„±', mood: 'ê¿ˆê°™ê³  í™˜ìƒì ì¸', moodEn: 'dreamlike and fantastic', sounds: 'ë°”ëŒì†Œë¦¬, í•˜í”„', soundsEn: 'wind sounds, harp', color: 'linear-gradient(135deg, #0ea5e9, #6366f1)', emoji: 'ğŸ°â˜ï¸ğŸŒˆ' },
            { id: 'candy_land', name: 'ğŸ­ ì‚¬íƒ•ë‚˜ë¼', mood: 'ë‹¬ì½¤í•˜ê³  ì¦ê±°ìš´', moodEn: 'sweet and joyful', sounds: 'íŒì½˜ í„°ì§€ëŠ” ì†Œë¦¬', soundsEn: 'popcorn popping sounds', color: 'linear-gradient(135deg, #ec4899, #f43f5e)', emoji: 'ğŸ­ğŸ§ğŸ°' },
            { id: 'school', name: 'ğŸ« ìš°ë¦¬ í•™êµ', mood: 'ì¹œê·¼í•˜ê³  í™œê¸°ì°¬', moodEn: 'friendly and lively', sounds: 'ì•„ì´ë“¤ ì›ƒìŒì†Œë¦¬', soundsEn: 'children laughing', color: 'linear-gradient(135deg, #f97316, #fbbf24)', emoji: 'ğŸ“šâœï¸ğŸ’' }
        ];

        const conflicts = [
            { id: 'lost_friend', name: 'ğŸ’” ìƒì–´ë²„ë¦° ì¹œêµ¬ ì°¾ê¸°', emotion: 'ê·¸ë¦¬ìš´', emotionEn: 'longing', resolution: 'ê°ë™ì ì¸ ì¬íšŒ', resolutionEn: 'touching reunion', color: 'linear-gradient(135deg, #a855f7, #ec4899)' },
            { id: 'evil_wizard', name: 'ğŸ§™â€â™‚ï¸ ë‚˜ìœ ë§ˆë²•ì‚¬ì™€ì˜ ëŒ€ê²°', emotion: 'ìš©ê°í•œ', emotionEn: 'brave', resolution: 'ì„ ì´ ì•…ì„ ì´ê¸°ëŠ”', resolutionEn: 'good triumphs over evil', color: 'linear-gradient(135deg, #ef4444, #f97316)' },
            { id: 'lost_treasure', name: 'ğŸ’ ì‚¬ë¼ì§„ ë³´ë¬¼ì˜ ë¹„ë°€', emotion: 'ì‹ ë‚˜ëŠ”', emotionEn: 'exciting', resolution: 'ëª¨í—˜ì˜ ì™„ì„±', resolutionEn: 'adventure completion', color: 'linear-gradient(135deg, #fbbf24, #f59e0b)' },
            { id: 'broken_magic', name: 'âš¡ ê³ ì¥ë‚œ ë§ˆë²• ê³ ì¹˜ê¸°', emotion: 'ì•ˆíƒ€ê¹Œìš´', emotionEn: 'sorrowful', resolution: 'í˜‘ë ¥ìœ¼ë¡œ í•´ê²°', resolutionEn: 'solved through cooperation', color: 'linear-gradient(135deg, #3b82f6, #6366f1)' },
            { id: 'new_world', name: 'ğŸŒŸ ìƒˆë¡œìš´ ì„¸ê³„ íƒí—˜', emotion: 'ì„¤ë ˆëŠ”', emotionEn: 'thrilling', resolution: 'ê¿ˆì˜ ì‹¤í˜„', resolutionEn: 'dream realization', color: 'linear-gradient(135deg, #059669, #0891b2)' },
            { id: 'friendship', name: 'ğŸ¤ ì„œë¡œ ë‹¤ë¥¸ ì¹œêµ¬ë“¤ì˜ ìš°ì •', emotion: 'ë”°ëœ»í•œ', emotionEn: 'warm', resolution: 'ì§„ì •í•œ ìš°ì •', resolutionEn: 'true friendship', color: 'linear-gradient(135deg, #f43f5e, #ec4899)' }
        ];

        const musicStyles = [
            { id: 'orchestral', name: 'ğŸ¼ ì˜¤ì¼€ìŠ¤íŠ¸ë¼', description: 'ì›…ì¥í•˜ê³  í´ë˜ì‹í•œ', color: 'linear-gradient(135deg, #7c3aed, #8b5cf6)' },
            { id: 'electronic', name: 'ğŸ¹ ì¼ë ‰íŠ¸ë¡œë‹‰', description: 'ë¯¸ë˜ì ì´ê³  ì‹ ë‚˜ëŠ”', color: 'linear-gradient(135deg, #06b6d4, #3b82f6)' },
            { id: 'folk', name: 'ğŸ¸ í¬í¬', description: 'ë”°ëœ»í•˜ê³  ìì—°ìŠ¤ëŸ¬ìš´', color: 'linear-gradient(135deg, #f59e0b, #f97316)' },
            { id: 'jazz', name: 'ğŸ· ì¬ì¦ˆ', description: 'ì„¸ë ¨ë˜ê³  ë¶€ë“œëŸ¬ìš´', color: 'linear-gradient(135deg, #059669, #10b981)' },
            { id: 'pop', name: 'ğŸ¤ íŒ', description: 'ë°ê³  ì¤‘ë…ì„± ìˆëŠ”', color: 'linear-gradient(135deg, #ec4899, #f43f5e)' },
            { id: 'ambient', name: 'ğŸŒ™ ì•°ë¹„ì–¸íŠ¸', description: 'ëª½í™˜ì ì´ê³  í‰í™”ë¡œìš´', color: 'linear-gradient(135deg, #6366f1, #8b5cf6)' }
        ];

        const steps = [
            { title: 'ì£¼ì¸ê³µ ì„ íƒí•˜ê¸°', description: 'ì´ì•¼ê¸°ì˜ ì£¼ì¸ê³µì„ ê³¨ë¼ë³´ì„¸ìš”!', emoji: 'ğŸ¦¸â€â™€ï¸' },
            { title: 'ë°°ê²½ ì„¤ì •í•˜ê¸°', description: 'ëª¨í—˜ì´ í¼ì³ì§ˆ ë¬´ëŒ€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!', emoji: 'ğŸ°' },
            { title: 'ê°ˆë“± ìƒí™© ë§Œë“¤ê¸°', description: 'ì–´ë–¤ ë¬¸ì œê°€ ì¼ì–´ë‚ ê¹Œìš”?', emoji: 'âš¡' },
            { title: 'ìŒì•… ìŠ¤íƒ€ì¼ ì •í•˜ê¸°', description: 'ì–´ë–¤ ë¶„ìœ„ê¸°ì˜ ìŒì•…ì„ ì›í•˜ì„¸ìš”?', emoji: 'ğŸµ' }
        ];

        // ìƒíƒœ
        let currentStep = 0;
        let selectedChoices = {};
        let currentLanguage = 'korean';
        let generatedStory = null;

        // ì´ˆê¸°í™”
        function init() {
            updateProgressBar();
            updateStepInfo();
            renderChoices();
            updateNavigation();
        }

        // ì§„í–‰ ë°” ì—…ë°ì´íŠ¸
        function updateProgressBar() {
            const progressBar = document.getElementById('progressBar');
            progressBar.innerHTML = '';

            for (let i = 0; i < steps.length; i++) {
                // ìŠ¤í…
                const stepEl = document.createElement('div');
                stepEl.className = `progress-step ${i <= currentStep ? 'active' : 'inactive'}`;
                stepEl.textContent = i <= currentStep ? steps[i].emoji : i + 1;
                progressBar.appendChild(stepEl);

                // ì—°ê²°ì„ 
                if (i < steps.length - 1) {
                    const lineEl = document.createElement('div');
                    lineEl.className = `progress-line ${i < currentStep ? 'completed' : 'incomplete'}`;
                    progressBar.appendChild(lineEl);
                }
            }
        }

        // ë‹¨ê³„ ì •ë³´ ì—…ë°ì´íŠ¸
        function updateStepInfo() {
            document.getElementById('stepTitle').textContent = `${steps[currentStep].emoji} ${steps[currentStep].title}`;
            document.getElementById('stepDesc').textContent = steps[currentStep].description;
            document.getElementById('progressText').textContent = `${currentStep + 1} / ${steps.length} ë‹¨ê³„`;
            document.getElementById('progressStars').textContent = 'ğŸŒŸ'.repeat(currentStep + 1) + 'â­'.repeat(steps.length - currentStep - 1);
        }

        // ì„ íƒì§€ ë Œë”ë§
        function renderChoices() {
            const grid = document.getElementById('choicesGrid');
            const gridClasses = ['grid-characters', 'grid-settings', 'grid-conflicts', 'grid-styles'];
            grid.className = `choices-grid ${gridClasses[currentStep]}`;
            grid.innerHTML = '';

            let choices = [];
            let selectedKey = '';

            switch (currentStep) {
                case 0:
                    choices = characters;
                    selectedKey = 'character';
                    break;
                case 1:
                    choices = settings;
                    selectedKey = 'setting';
                    break;
                case 2:
                    choices = conflicts;
                    selectedKey = 'conflict';
                    break;
                case 3:
                    choices = musicStyles;
                    selectedKey = 'style';
                    break;
            }

            choices.forEach(choice => {
                const card = document.createElement('div');
                card.className = `choice-card ${selectedChoices[selectedKey] === choice.id ? 'selected' : ''}`;
                card.onclick = () => selectChoice(selectedKey, choice.id);

                if (selectedChoices[selectedKey] === choice.id) {
                    card.style.background = choice.color;
                }

                let emoji = '';
                let name = '';
                let desc = '';
                let extra = '';

                if (currentStep === 0) { // ìºë¦­í„°
                    emoji = choice.name.split(' ')[0];
                    name = choice.name.split(' ').slice(1).join(' ');
                    desc = choice.personality;
                    extra = `ëª©ì†Œë¦¬: ${choice.voice}`;
                } else if (currentStep === 1) { // ë°°ê²½
                    emoji = choice.emoji;
                    name = choice.name;
                    desc = choice.mood;
                    extra = `ì†Œë¦¬: ${choice.sounds}`;
                } else if (currentStep === 2) { // ê°ˆë“±
                    name = choice.name;
                    desc = `ê°ì •: ${choice.emotion}`;
                    extra = `ê²°ë§: ${choice.resolution}`;
                } else if (currentStep === 3) { // ìŒì•…
                    emoji = choice.name.split(' ')[0];
                    name = choice.name.split(' ').slice(1).join(' ');
                    desc = choice.description;
                }

                card.innerHTML = `
                    ${emoji ? `<div class="choice-emoji">${emoji}</div>` : ''}
                    <div class="choice-name">${name}</div>
                    <div class="choice-desc">${desc}</div>
                    ${extra ? `<div class="choice-extra">${extra}</div>` : ''}
                `;

                grid.appendChild(card);
            });
        }

        // ì„ íƒ
        function selectChoice(key, value) {
            selectedChoices[key] = value;
            renderChoices();
            updateNavigation();
        }

        // ë‚´ë¹„ê²Œì´ì…˜ ì—…ë°ì´íŠ¸
        function updateNavigation() {
            const prevBtn = document.getElementById('prevButton');
            const nextBtn = document.getElementById('nextButton');

            prevBtn.disabled = currentStep === 0;
            
            const canProceed = canGoNext();
            nextBtn.disabled = !canProceed;
            
            if (currentStep === steps.length - 1) {
                nextBtn.innerHTML = '<span>âœ¨</span> ğŸ­ ë§ˆë²• ìŠ¤í† ë¦¬ ì™„ì„±! âœ¨';
            } else {
                nextBtn.innerHTML = 'ë‹¤ìŒ ë‹¨ê³„ ğŸš€';
            }
        }

        // ë‹¤ìŒ ë‹¨ê³„ë¡œ ê°ˆ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸
        function canGoNext() {
            switch (currentStep) {
                case 0: return selectedChoices.character;
                case 1: return selectedChoices.setting;
                case 2: return selectedChoices.conflict;
                case 3: return selectedChoices.style;
                default: return false;
            }
        }

        // ì´ì „ ë‹¨ê³„
        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                updateProgressBar();
                updateStepInfo();
                renderChoices();
                updateNavigation();
            }
        }

        // ë‹¤ìŒ ë‹¨ê³„
        function nextStep() {
            if (!canGoNext()) return;

            if (currentStep < steps.length - 1) {
                currentStep++;
                updateProgressBar();
                updateStepInfo();
                renderChoices();
                updateNavigation();
            } else {
                generateStory();
            }
        }

        // ìŠ¤í† ë¦¬ ìƒì„±
        function generateStory() {
            const character = characters.find(c => c.id === selectedChoices.character);
            const setting = settings.find(s => s.id === selectedChoices.setting);
            const conflict = conflicts.find(c => c.id === selectedChoices.conflict);
            const style = musicStyles.find(s => s.id === selectedChoices.style);

            generatedStory = {
                title: `${character.name}ì˜ ${conflict.name} ëŒ€ëª¨í—˜`,
                character,
                setting,
                conflict,
                style,
                scenes: [
                    {
                        title: 'ğŸŒ… í”„ë¡¤ë¡œê·¸ - í‰í™”ë¡œìš´ ì‹œì‘',
                        description: `${setting.name}ì—ì„œ í‰í™”ë¡­ê²Œ ì§€ë‚´ë˜ ${character.name}ì˜ ì¼ìƒ`,
                        mood: 'ğŸŒˆ í‰í™”ë¡œìš´',
                        duration: '1ë¶„ 20ì´ˆ',
                        color: 'linear-gradient(135deg, #10b981, #3b82f6)',
                        promptKo: `${setting.mood} ë¶„ìœ„ê¸°ì˜ ${style.description} ${style.name.replace(/ğŸ¼|ğŸ¹|ğŸ¸|ğŸ·|ğŸ¤|ğŸŒ™/g, '')} ìŒì•…, ${setting.sounds}ê°€ ì–´ìš°ëŸ¬ì§„ í‰í™”ë¡œìš´ ì˜¤í”„ë‹ í…Œë§ˆ, ${character.voice} ëª©ì†Œë¦¬ë¡œ í•˜ë£¨ë¥¼ ì‹œì‘í•˜ëŠ” í¬ë§ì°¬ ë©œë¡œë””`,
                        promptEn: `Peaceful opening theme with ${style.description} ${style.name.replace(/ğŸ¼|ğŸ¹|ğŸ¸|ğŸ·|ğŸ¤|ğŸŒ™/g, '')} music featuring ${setting.soundsEn}, ${character.voiceEn} vocals expressing hopeful melodies for a new day in ${setting.moodEn} atmosphere`
                    },
                    {
                        title: 'âš¡ ì‚¬ê±´ ë°œìƒ - ë¬¸ì œì˜ ì‹œì‘',
                        description: `ê°‘ìê¸° ${conflict.name}ì´ ì¼ì–´ë‚˜ë©´ì„œ ì‹œì‘ë˜ëŠ” ëª¨í—˜`,
                        mood: 'ğŸ˜° ê¸´ì¥ê°',
                        duration: '1ë¶„ 30ì´ˆ',
                        color: 'linear-gradient(135deg, #ef4444, #f97316)',
                        promptKo: `ê¸´ì¥ê° ë„˜ì¹˜ëŠ” ${style.description} ${style.name.replace(/ğŸ¼|ğŸ¹|ğŸ¸|ğŸ·|ğŸ¤|ğŸŒ™/g, '')} ìŒì•…, ${conflict.emotion} ê°ì •ì„ í‘œí˜„í•˜ëŠ” ê·¹ì ì¸ ì „ê°œ, ë¬¸ì œ ìƒí™©ì˜ ì‹¬ê°ì„±ì„ ë‚˜íƒ€ë‚´ëŠ” ë³€í™”ë¬´ìŒí•œ ë¦¬ë“¬`,
                        promptEn: `Dramatic ${style.description} ${style.name.replace(/ğŸ¼|ğŸ¹|ğŸ¸|ğŸ·|ğŸ¤|ğŸŒ™/g, '')} music with tension, expressing ${conflict.emotionEn} emotions through dynamic development, unpredictable rhythms showing the seriousness of the crisis`
                    },
                    {
                        title: 'ğŸƒâ€â™€ï¸ ëª¨í—˜ ì‹œì‘ - ìš©ê¸°ì˜ ë°œê±¸ìŒ',
                        description: `${character.personality} ${character.name}ì´ ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ë– ë‚˜ëŠ” ì—¬í–‰`,
                        mood: 'ğŸ’ª ìš©ê°í•œ',
                        duration: '2ë¶„',
                        color: 'linear-gradient(135deg, #fbbf24, #f97316)',
                        promptKo: `${character.personality} ì„±ê²©ì„ í‘œí˜„í•˜ëŠ” ëª¨í—˜ì˜ ${style.description} ${style.name.replace(/ğŸ¼|ğŸ¹|ğŸ¸|ğŸ·|ğŸ¤|ğŸŒ™/g, '')} í–‰ì§„ê³¡, ìš©ê¸°ì™€ ê²°ë‹¨ë ¥ì´ ë‹´ê¸´ í˜ì°¬ ë©œë¡œë””, ${setting.sounds}ê°€ ë°°ê²½ì— ê¹”ë¦° ì›…ì¥í•œ ì—¬í–‰ í…Œë§ˆ`,
                        promptEn: `Adventure march in ${style.description} ${style.name.replace(/ğŸ¼|ğŸ¹|ğŸ¸|ğŸ·|ğŸ¤|ğŸŒ™/g, '')} style expressing ${character.personalityEn} character, powerful melodies filled with courage and determination, epic journey theme with ${setting.soundsEn} in background`
                    },
                    {
                        title: 'ğŸŒŸ í´ë¼ì´ë§¥ìŠ¤ - ê°€ì¥ ì–´ë ¤ìš´ ìˆœê°„',
                        description: `ìµœëŒ€ì˜ ìœ„ê¸° ìƒí™©ì—ì„œ ${character.name}ì´ ë³´ì—¬ì£¼ëŠ” ì§„ì •í•œ ìš©ê¸°`,
                        mood: 'ğŸ”¥ ì ˆì •ì˜ ê¸´ì¥',
                        duration: '2ë¶„ 30ì´ˆ',
                        color: 'linear-gradient(135deg, #8b5cf6, #ec4899)',
                        promptKo: `ì ˆì •ì˜ ê¸´ì¥ê°ì´ ë‹´ê¸´ ${style.description} ${style.name.replace(/ğŸ¼|ğŸ¹|ğŸ¸|ğŸ·|ğŸ¤|ğŸŒ™/g, '')} ëŒ€ê²° ìŒì•…, ëª¨ë“  ì•…ê¸°ê°€ í˜ì„ í•©ì³ ë§Œë“œëŠ” ì›…ì¥í•œ í´ë¼ì´ë§¥ìŠ¤, ${character.voice} ëª©ì†Œë¦¬ê°€ ì ˆê·œí•˜ëŠ” ê°ë™ì ì¸ ìˆœê°„`,
                        promptEn: `Epic climax battle music in ${style.description} ${style.name.replace(/ğŸ¼|ğŸ¹|ğŸ¸|ğŸ·|ğŸ¤|ğŸŒ™/g, '')} style with peak tension, all instruments combining for a majestic climax, emotional moment with ${character.voiceEn} vocals crying out with passion`
                    },
                    {
                        title: 'ğŸ‰ í•´ê²°ê³¼ ê¸°ì¨ - í–‰ë³µí•œ ê²°ë§',
                        description: `${conflict.resolution}ìœ¼ë¡œ ëª¨ë“  ê²ƒì´ í•´ê²°ë˜ëŠ” ê°ë™ì ì¸ ìˆœê°„`,
                        mood: 'ğŸŒˆ ê¸°ì¨ê³¼ ê°ë™',
                        duration: '2ë¶„',
                        color: 'linear-gradient(135deg, #059669, #06b6d4)',
                        promptKo: `${conflict.resolution}ì˜ ê¸°ì¨ì„ í‘œí˜„í•˜ëŠ” í™˜ìƒì ì¸ ${style.description} ${style.name.replace(/ğŸ¼|ğŸ¹|ğŸ¸|ğŸ·|ğŸ¤|ğŸŒ™/g, '')} ì¶•ì œ ìŒì•…, ëª¨ë“  ë“±ì¥ì¸ë¬¼ì´ í•¨ê»˜ ë¶€ë¥´ëŠ” í•©ì°½, í•´í”¼ì—”ë”©ì˜ ë”°ëœ»í•œ ê°ë™ì´ ë‹´ê¸´ í”¼ë‚ ë ˆ`,
                        promptEn: `Fantastic celebratory ${style.description} ${style.name.replace(/ğŸ¼|ğŸ¹|ğŸ¸|ğŸ·|ğŸ¤|ğŸŒ™/g, '')} music expressing joy of ${conflict.resolutionEn}, chorus sung by all characters together, warm and touching finale with happy ending emotions`
                    }
                ]
            };

            showResult();
        }

        // ê²°ê³¼ í™”ë©´ í‘œì‹œ
        function showResult() {
            document.getElementById('mainScreen').classList.add('hidden');
            document.getElementById('resultScreen').classList.remove('hidden');

            document.getElementById('storyTitle').textContent = generatedStory.title;
            
            renderStorySummary();
            renderScenes();
        }

        // ìŠ¤í† ë¦¬ ìš”ì•½ ë Œë”ë§
        function renderStorySummary() {
            const summary = document.getElementById('storySummary');
            summary.innerHTML = `
                <div class="summary-card" style="background: ${generatedStory.character.color};">
                    <div style="font-size: 1.25rem; margin-bottom: 0.5rem;">${generatedStory.character.name}</div>
                    <div style="font-size: 0.75rem; opacity: 0.9;">âœ¨ ì£¼ì¸ê³µ âœ¨</div>
                </div>
                <div class="summary-card" style="background: ${generatedStory.setting.color};">
                    <div style="font-size: 1rem; margin-bottom: 0.5rem;">${generatedStory.setting.name}</div>
                    <div style="font-size: 0.75rem; opacity: 0.9;">ğŸ° ë°°ê²½ ğŸ°</div>
                </div>
                <div class="summary-card" style="background: ${generatedStory.conflict.color};">
                    <div style="font-size: 0.875rem; margin-bottom: 0.5rem;">${generatedStory.conflict.name}</div>
                    <div style="font-size: 0.75rem; opacity: 0.9;">âš¡ ê°ˆë“± âš¡</div>
                </div>
                <div class="summary-card" style="background: ${generatedStory.style.color};">
                    <div style="font-size: 1rem; margin-bottom: 0.5rem;">${generatedStory.style.name}</div>
                    <div style="font-size: 0.75rem; opacity: 0.9;">ğŸµ ìŒì•… ğŸµ</div>
                </div>
            `;
        }

        // ì¥ë©´ë“¤ ë Œë”ë§
        function renderScenes() {
            const container = document.getElementById('scenesContainer');
            container.innerHTML = '';

            generatedStory.scenes.forEach((scene, index) => {
                const sceneEl = document.createElement('div');
                sceneEl.className = 'scene-card';
                sceneEl.style.background = scene.color;

                sceneEl.innerHTML = `
                    <div class="scene-header">
                        <h3 class="scene-title">${scene.title}</h3>
                        <div class="scene-meta">
                            <span class="scene-badge">â±ï¸ ${scene.duration}</span>
                            <span class="scene-badge">${scene.mood}</span>
                        </div>
                    </div>
                    <p class="scene-description">${scene.description}</p>
                    <div class="prompt-container">
                        <div class="prompt-header">
                            <span style="font-size: 1.25rem;">ğŸµ</span>
                            <span style="font-weight: bold;">ğŸ­ Suno AI ë§ˆë²• ì£¼ë¬¸:</span>
                            <span style="font-size: 1.25rem;">âš¡</span>
                        </div>
                        <div class="prompt-text" id="prompt-${index}">
                            "${currentLanguage === 'korean' ? scene.promptKo : scene.promptEn}"
                        </div>
                        <div class="prompt-actions">
                            <button class="action-button btn-suno" onclick="openSuno()">
                                â–¶ï¸ ğŸš€ Sunoì—ì„œ ë§Œë“¤ê¸°!
                            </button>
                            <button class="action-button btn-copy" onclick="copyPrompt('${currentLanguage === 'korean' ? scene.promptKo : scene.promptEn}')">
                                ğŸ“‹ ğŸ“‹ ë§ˆë²•ì£¼ë¬¸ ë³µì‚¬!
                            </button>
                        </div>
                    </div>
                `;

                container.appendChild(sceneEl);
            });
        }

        // ì–¸ì–´ ì„¤ì •
        function setLanguage(language) {
            currentLanguage = language;
            
            document.getElementById('koreanBtn').classList.toggle('active', language === 'korean');
            document.getElementById('englishBtn').classList.toggle('active', language === 'english');
            
            renderScenes();
        }

        // í”„ë¡¬í”„íŠ¸ ë³µì‚¬
        function copyPrompt(text) {
            try {
                navigator.clipboard.writeText(text).then(() => {
                    showCopyAlert();
                });
            } catch (err) {
                // í´ë°±
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showCopyAlert();
            }
        }

        // ë³µì‚¬ ì•Œë¦¼ í‘œì‹œ
        function showCopyAlert() {
            const alert = document.getElementById('copyAlert');
            alert.classList.remove('hidden');
            setTimeout(() => {
                alert.classList.add('hidden');
            }, 3000);
        }

        // Suno ì—´ê¸°
        function openSuno() {
            window.open('https://suno.com', '_blank');
        }

        // ì¬ì‹œì‘
        function restart() {
            currentStep = 0;
            selectedChoices = {};
            generatedStory = null;
            currentLanguage = 'korean';
            
            document.getElementById('resultScreen').classList.add('hidden');
            document.getElementById('mainScreen').classList.remove('hidden');
            
            init();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('load', init);
    </script>
</body>
</html>